import React, { useState } from 'react';
import './MalwareDetect.css'

function MalwareDetection() {
  const [selectedFile, setSelectedFile] = useState(null);
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [result, setResult] = useState(null);

  const handleFileChange = (event) => {
    const file = event.target.files[0];
    setSelectedFile(file);

    if (file) {
      const fileName = file.name;
      console.log('Selected file:', fileName); // For debugging (replace with UI display)
    }
  };

  const handleScanClick = async () => {
    if (!selectedFile) {
      alert('Please select a file to scan.');
      return;
    }

    setIsAnalyzing(true);
    setResult(null); // Clear previous result

    // Simulate malware detection logic (replace with actual API call)
    const isMalware = Math.random() < 0.1; // Simulate random detection

    await new Promise((resolve) => setTimeout(resolve, 2000)); // Simulate analysis time

    setIsAnalyzing(false);
    setResult(isMalware ? 'Malware Detected' : 'File is Clean');
  };

  return (
    <div className="container malware-detection">
      <h1>Malware Detection</h1>
      <div className="file-input">
        <input
          type="file"
          accept=".exe, .pdf, .docx"
          onChange={handleFileChange}
          id="file-input"
          style={{ display: 'none' }}
        />
        <label htmlFor="file-input">Select a file</label>
        {selectedFile && <span className="file-name">{selectedFile.name}</span>}
      </div>
      <button onClick={handleScanClick} disabled={isAnalyzing}>
        {isAnalyzing ? 'Scanning...' : 'Scan File'}
      </button>
      {result && <div className="result">{result}</div>}
      {isAnalyzing && <div className="loader">Loading...</div>}
    </div>
  );
}

export default MalwareDetection;
